PGE 2B DATABASE SCHEMA DEBUG RESULTS
==================================================
Debug Date: 2025-11-01 08:45:18
Database: PTRJ_P2B.FDB


Check EMPLOYEE table structure:
SQL: SELECT * FROM EMPLOYEE ROWS 5
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check EMP table structure (backup):
SQL: SELECT * FROM EMP ROWS 5
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Find all employee-related tables:
SQL: SELECT RDB$RELATION_NAME FROM RDB$RELATIONS WHERE RDB$RELATION_NAME LIKE '%EMP%'
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check SCANUSERID values in FFB data:
SQL: SELECT DISTINCT SCANUSERID FROM FFBSCANNERDATA02 WHERE SCANUSERID IS NOT NULL ROWS 10
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Test join with EMPLOYEE table:
SQL: SELECT COUNT(*) AS join_count FROM FFBSCANNERDATA02 a LEFT JOIN EMPLOYEE e ON a.SCANUSERID = e.EMPID WHERE a.TRANSDATE >= '2025-02-01' AND a.TRANSDATE <= '2025-02-28'
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Test join with EMP table:
SQL: SELECT COUNT(*) AS join_count FROM FFBSCANNERDATA02 a LEFT JOIN EMP e ON a.SCANUSERID = e.ID WHERE a.TRANSDATE >= '2025-02-01' AND a.TRANSDATE <= '2025-02-28'
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check CRDIVISION table structure:
SQL: SELECT * FROM CRDIVISION ROWS 5
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check OCFIELD table structure (backup):
SQL: SELECT * FROM OCFIELD ROWS 5
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Find all division/field-related tables:
SQL: SELECT RDB$RELATION_NAME FROM RDB$RELATIONS WHERE RDB$RELATION_NAME LIKE '%DIV%' OR RDB$RELATION_NAME LIKE '%FIELD%'
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check DIVID values in FFB data:
SQL: SELECT DISTINCT DIVID FROM FFBSCANNERDATA02 WHERE DIVID IS NOT NULL ROWS 10
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Test join with CRDIVISION table:
SQL: SELECT COUNT(*) AS join_count FROM FFBSCANNERDATA02 a LEFT JOIN CRDIVISION c ON a.DIVID = c.ID WHERE a.DIVID IS NOT NULL
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Test basic quality data aggregation:
SQL: SELECT TRANSDATE, SUM(RIPEBCH) AS ripe, SUM(BLACKBCH) AS black, SUM(ROTTENBCH) AS rotten FROM FFBSCANNERDATA02 WHERE TRANSDATE >= '2025-02-01' AND TRANSDATE <= '2025-02-28' AND RIPEBCH > 0 GROUP BY TRANSDATE ORDER BY TRANSDATE ROWS 5
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Test defect percentage calculation:
SQL: SELECT TRANSDATE, SUM(RIPEBCH) AS ripe, SUM(BLACKBCH) AS black, SUM(ROTTENBCH) AS rotten, CAST(((SUM(BLACKBCH) + SUM(ROTTENBCH)) * 100.0 / NULLIF(SUM(RIPEBCH), 0)) AS NUMERIC(10,2)) AS defect_pct FROM FFBSCANNERDATA02 WHERE TRANSDATE >= '2025-02-01' AND TRANSDATE <= '2025-02-28' AND RIPEBCH > 0 GROUP BY TRANSDATE ORDER BY TRANSDATE ROWS 5
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check for NULL or zero RIPEBCH values:
SQL: SELECT COUNT(*) AS total_rows, COUNT(CASE WHEN RIPEBCH IS NULL OR RIPEBCH = 0 THEN 1 END) AS problematic_rows FROM FFBSCANNERDATA02 WHERE TRANSDATE >= '2025-02-01' AND TRANSDATE <= '2025-02-28'
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check all RECORDTAG values:
SQL: SELECT RECORDTAG, COUNT(*) AS row_count FROM FFBSCANNERDATA02 WHERE TRANSDATE >= '2025-02-01' AND TRANSDATE <= '2025-02-28' GROUP BY RECORDTAG ORDER BY row_count DESC
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------

Check specific employee role queries:
SQL: SELECT RECORDTAG, COUNT(*) AS row_count, SUM(RIPEBCH) AS total_ripe FROM FFBSCANNERDATA02 WHERE TRANSDATE >= '2025-02-01' AND TRANSDATE <= '2025-02-28' AND RECORDTAG IN ('PM', 'P1', 'P5') GROUP BY RECORDTAG
Success: False
Error: Use CONNECT or CREATE DATABASE to specify a database
Statement failed, SQLCODE = -904

unavailable database
Use CONNECT or CREATE DATABASE to specify a database

----------------------------------------
